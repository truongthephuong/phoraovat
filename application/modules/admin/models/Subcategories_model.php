<?php    class Subcategories_model extends CI_Model    {	    public function __construct()	    {		    parent::__construct();	    }	    public function getList($id)	    {		    $this->db->select('cate_id, name, rank, icon, status');		    $this->db->where('id', $id);		    $query = $this->db->get('subcategories');		    //echo $this->db->last_query();die;		    return $query->result();	    }	    public function getAllCategories()	    {		    $this->db->select('id,name');		    $query = $this->db->get('subcategories');		    if ($query->num_rows() > 0) {			    foreach ($query->result() as $data) {				    $items[$data->id] = $data->name;			    }			    $query->free_result();			    return $items;		    }	    }	    public function getField($cateId, $id, $fieldName)	    {		    $cond = 'status = 1';		    $this->db->select($fieldName);		    $this->db->where('cate_id', $cateId);		    $this->db->where('id', $id);		    $query = $this->db->get('subcategories');		    //echo $this->db->last_query();		    return $query->result();	    }		    public function getListCategories($limit, $start, $id)		    {			    $this->db->select('sc.id, sc.cate_id,sc.name,sc.icon,sc.rank,sc.status,c.name catename');			    $this->db->from('subcategories sc');			    $this->db->join('categories c', 'c.id = sc.cate_id', 'left');			    $this->db->limit($limit, $start);			    if ($id != '') {				    $this->db->where('sc.id', $id);			    }			    $this->db->order_by('sc.id', 'ASC');			    $query = $this->db->get();			    //echo $this->db->last_query();			    return $query->result();		    }		//get number of records via cate id		public function record_count(){			$this->db->from('subcategories');			return $this->db->count_all_results();		}		public function updateSubCate($id,$data){			$this->db->where('id', $id);			$this->db->update('subcategories', $data);			//echo $this->db->last_query();exit;			return true;		}		public function addNew($datas,$tbName){			$this->db->insert($tbName, $datas);			return true;		}		public function getSubCateWhere($id){			$this->db->select('id,name');			$this->db->where('cate_id', $id);			$query = $this->db->get('subcategories');			//return $this->db->last_query();exit;			$items[0] = '--Chọn danh mục con--';			if ($query->num_rows() > 0) {				foreach($query->result() as $data) {					$items[$data->id] = $data->name;				}				$query->free_result();			}			return $items;		}    }?>