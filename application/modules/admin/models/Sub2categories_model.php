<?php    class Sub2categories_model extends CI_Model    {    	public function __construct(){        	parent::__construct();        }		public function getList($id){			//$cond = 'status = 1';		    $this->db->select('cate_id,subcate_id,name,icon,rank,status');		    $this->db->where('id', $id);		    $query = $this->db->get('sub2categories');		    return $query->result();		}		public function getAllCategories(){			$this->db->select('id,name');			$query = $this->db->get('sub2categories');			$items[0] = '-- Select Category --';			if ($query->num_rows() > 0) {				foreach($query->result() as $data) {					$items[$data->id] = $data->name;				}				$query->free_result();				return $items;			}		}		public function getField($cateId,$id,$fieldName){			$cond = 'status = 1';		    $this->db->select($fieldName);		    $this->db->where('subcate_id', $id);		    $this->db->where('id', $id);		    $query = $this->db->get('sub2categories');		    return $query->result();		}		public function getListCategories($limit,$start,$id){			$this->db->select('sc2.id, sc.cate_id, sc2.subcate_id,sc2.name,sc2.icon,sc2.rank,sc2.status, c.name catename,sc.name subcatename');			$this->db->from('sub2categories sc2');			$this->db->join('subcategories sc', 'sc.id = sc2.subcate_id', 'left');			$this->db->join('categories c', 'c.id = sc2.cate_id', 'left');			$this->db->limit($limit,$start);			if($id != ''){				$this->db->where('sc2.id', $id);			}			$this->db->order_by('sc2.id', 'ASC');			$query = $this->db->get();			//echo $this->db->last_query();			return $query->result();		}		//get number of records via cate id		public function record_count(){			$this->db->from('sub2categories');			return $this->db->count_all_results();		}		public function updateSubCate($id,$data){			$this->db->where('id', $id);			$this->db->update('sub2categories', $data);			//echo $this->db->last_query();exit;			return true;		}				public function addNew($datas,$tbName){			$this->db->insert($tbName, $datas);			return true;		}		public function getSubCateWhere($id){			$this->db->select('id,name');			$this->db->where('subcate_id', $id);			$query = $this->db->get('sub2categories');			$items[0] = '--Chọn danh mục con 1--';			if ($query->num_rows() > 0) {				foreach ($query->result() as $data) {					$items[$data->id] = $data->name;				}				$query->free_result();			}			return $items;		}    }?>